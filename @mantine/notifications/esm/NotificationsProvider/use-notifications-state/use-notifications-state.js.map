{"version":3,"file":"use-notifications-state.js","sources":["../../../src/NotificationsProvider/use-notifications-state/use-notifications-state.ts"],"sourcesContent":["import { useQueue, randomId } from '@mantine/hooks';\nimport { NotificationProps } from '../../types';\n\nexport default function useNotificationsState({ limit }: { limit: number }) {\n  const { state, queue, update, cleanQueue } = useQueue<NotificationProps>({\n    initialValues: [],\n    limit,\n  });\n\n  const showNotification = (notification: NotificationProps) => {\n    const id = notification.id || randomId();\n\n    update((notifications) => {\n      if (notification.id && notifications.some((n) => n.id === notification.id)) {\n        return notifications;\n      }\n\n      return [...notifications, { ...notification, id }];\n    });\n\n    return id;\n  };\n\n  const updateNotification = (id: string, notification: NotificationProps) =>\n    update((notifications) => {\n      const index = notifications.findIndex((n) => n.id === id);\n\n      if (index === -1) {\n        return notifications;\n      }\n\n      const newNotifications = [...notifications];\n      newNotifications[index] = notification;\n\n      return newNotifications;\n    });\n\n  const hideNotification = (id: string) =>\n    update((notifications) =>\n      notifications.filter((notification) => {\n        if (notification.id === id) {\n          typeof notification.onClose === 'function' && notification.onClose(notification);\n          return false;\n        }\n\n        return true;\n      })\n    );\n\n  const clean = () => update(() => []);\n\n  return {\n    notifications: state,\n    queue,\n    showNotification,\n    updateNotification,\n    hideNotification,\n    cleanQueue,\n    clean,\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;+BAG8C,CAAE,QAA4B;AAC1E,QAAM,CAAE,OAAO,OAAO,QAAQ,cAAe,SAA4B;AAAA,IACvE,eAAe;AAAA,IACf;AAAA;AAGF,QAAM,mBAAmB,CAAC,iBAAoC;AAC5D,UAAM,KAAK,aAAa,MAAM;AAE9B,WAAO,CAAC,kBAAkB;AACxB,UAAI,aAAa,MAAM,cAAc,KAAK,CAAC,MAAM,EAAE,OAAO,aAAa,KAAK;AAC1E,eAAO;AAAA;AAGT,aAAO,CAAC,GAAG,eAAe,iCAAK,eAAL,CAAmB;AAAA;AAG/C,WAAO;AAAA;AAGT,QAAM,qBAAqB,CAAC,IAAY,iBACtC,OAAO,CAAC,kBAAkB;AACxB,UAAM,QAAQ,cAAc,UAAU,CAAC,MAAM,EAAE,OAAO;AAEtD,QAAI,UAAU,IAAI;AAChB,aAAO;AAAA;AAGT,UAAM,mBAAmB,CAAC,GAAG;AAC7B,qBAAiB,SAAS;AAE1B,WAAO;AAAA;AAGX,QAAM,mBAAmB,CAAC,OACxB,OAAO,CAAC,kBACN,cAAc,OAAO,CAAC,iBAAiB;AACrC,QAAI,aAAa,OAAO,IAAI;AAC1B,aAAO,aAAa,YAAY,cAAc,aAAa,QAAQ;AACnE,aAAO;AAAA;AAGT,WAAO;AAAA;AAIb,QAAM,QAAQ,MAAM,OAAO,MAAM;AAEjC,SAAO;AAAA,IACL,eAAe;AAAA,IACf;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA;;;;"}