{"version":3,"file":"Image.js","sources":["../../src/Image/Image.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport cx from 'clsx';\nimport { DefaultProps, useMantineTheme, MantineNumberSize } from '@mantine/theme';\nimport { ImageIcon } from './ImageIcon';\nimport useStyles from './Image.styles';\n\nexport interface ImageProps\n  extends DefaultProps,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'placeholder'> {\n  /** Image src */\n  src?: string;\n\n  /** Image alt text, used as title for placeholder if image was not loaded */\n  alt?: string;\n\n  /** Image object-fit property */\n  fit?: 'contain' | 'cover';\n\n  /** Image width, defaults to 100%, cannot exceed 100% */\n  width?: number | string;\n\n  /** Image height, defaults to original image height adjusted to given width */\n  height?: number | string;\n\n  /** Predefined border-radius value from theme.radius or number for border-radius in px */\n  radius?: MantineNumberSize;\n\n  /** Enable placeholder when image is loading and when image fails to load */\n  withPlaceholder?: boolean;\n\n  /** Customize placeholder content */\n  placeholder?: React.ReactNode;\n\n  /** Props spread to img element */\n  imageProps?: Record<string, any>;\n\n  /** Get root element ref */\n  elementRef?: React.ForwardedRef<HTMLDivElement>;\n\n  /** Get image element ref */\n  imageRef?: React.ForwardedRef<HTMLImageElement>;\n}\n\nexport function Image({\n  className,\n  themeOverride,\n  alt,\n  src,\n  fit = 'cover',\n  width = '100%',\n  height = 'auto',\n  radius = 0,\n  style,\n  imageProps,\n  withPlaceholder = false,\n  placeholder,\n  imageRef,\n  elementRef,\n  ...others\n}: ImageProps) {\n  const classes = useStyles({ radius, theme: useMantineTheme(themeOverride) });\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(!src);\n  const isPlaceholder = withPlaceholder && (!loaded || error);\n  const firstUpdate = useRef(true);\n\n  useEffect(() => {\n    if (firstUpdate.current) {\n      firstUpdate.current = false;\n    } else {\n      setLoaded(false);\n      setError(false);\n    }\n  }, [src]);\n\n  return (\n    <div\n      data-mantine-image\n      className={cx(classes.wrapper, className)}\n      style={{ width, height, ...style }}\n      ref={elementRef}\n      {...others}\n    >\n      {isPlaceholder && (\n        <div data-mantine-image-placeholder className={classes.placeholderIcon} title={alt}>\n          {placeholder || <ImageIcon style={{ width: 40, height: 40 }} />}\n        </div>\n      )}\n\n      <img\n        className={cx(classes.image, imageProps?.className)}\n        src={src}\n        alt={alt}\n        style={{ ...imageProps?.style, objectFit: fit }}\n        ref={imageRef}\n        onLoad={(event) => {\n          setLoaded(true);\n          typeof imageProps?.onLoad === 'function' && imageProps.onLoad(event);\n        }}\n        onError={(event) => {\n          setError(true);\n          typeof imageProps?.onError === 'function' && imageProps.onError(event);\n        }}\n        {...imageProps}\n      />\n    </div>\n  );\n}\n\nImage.displayName = '@mantine/core/Image';\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA2CsB,IAgBP;AAhBO,eACpB;AAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,IACT,SAAS;AAAA,IACT;AAAA,IACA;AAAA,IACA,kBAAkB;AAAA,IAClB;AAAA,IACA;AAAA,IACA;AAAA,MAdoB,IAejB,mBAfiB,IAejB;AAAA,IAdH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAGA,QAAM,UAAU,UAAU,CAAE,QAAQ,OAAO,gBAAgB;AAC3D,QAAM,CAAC,QAAQ,aAAa,SAAS;AACrC,QAAM,CAAC,OAAO,YAAY,SAAS,CAAC;AACpC,QAAM,gBAAgB,qBAAqB,UAAU;AACrD,QAAM,cAAc,OAAO;AAE3B,YAAU,MAAM;AACd,QAAI,YAAY,SAAS;AACvB,kBAAY,UAAU;AAAA,WACjB;AACL,gBAAU;AACV,eAAS;AAAA;AAAA,KAEV,CAAC;AAEJ,6CACG,OAAD;AAAA,IACE,sBAAkB;AAAA,IAClB,WAAW,GAAG,QAAQ,SAAS;AAAA,IAC/B,OAAO,gBAAE,OAAO,SAAW;AAAA,IAC3B,KAAK;AAAA,KACD,SAEH,qDACE,OAAD;AAAA,IAAK,kCAA8B;AAAA,IAAC,WAAW,QAAQ;AAAA,IAAiB,OAAO;AAAA,KAC5E,mDAAgB,WAAD;AAAA,IAAW,OAAO,CAAE,OAAO,IAAI,QAAQ;AAAA,2CAI1D,OAAD;AAAA,IACE,WAAW,GAAG,QAAQ,OAAO,yCAAY;AAAA,IACzC;AAAA,IACA;AAAA,IACA,OAAO,iCAAK,yCAAY,QAAjB,CAAwB,WAAW;AAAA,IAC1C,KAAK;AAAA,IACL,QAAQ,CAAC,UAAU;AACjB,gBAAU;AACV,uDAAmB,YAAW,cAAc,WAAW,OAAO;AAAA;AAAA,IAEhE,SAAS,CAAC,UAAU;AAClB,eAAS;AACT,uDAAmB,aAAY,cAAc,WAAW,QAAQ;AAAA;AAAA,KAE9D;AAAA;AAMZ,MAAM,cAAc;;;;"}