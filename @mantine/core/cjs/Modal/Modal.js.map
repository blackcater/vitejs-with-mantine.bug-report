{"version":3,"file":"Modal.js","sources":["../../src/Modal/Modal.tsx"],"sourcesContent":["import React from 'react';\nimport cx from 'clsx';\nimport { DefaultProps, useMantineTheme } from '@mantine/theme';\nimport {\n  useClickOutside,\n  useReducedMotion,\n  useId,\n  useScrollLock,\n  useFocusTrap,\n} from '@mantine/hooks';\nimport { ActionIcon } from '../ActionIcon/ActionIcon';\nimport { Text } from '../Text/Text';\nimport { Paper } from '../Paper/Paper';\nimport { Overlay } from '../Overlay/Overlay';\nimport { Portal } from '../Portal/Portal';\nimport { GroupedTransition, MantineTransition } from '../Transition/Transition';\nimport { CloseIcon } from './CloseIcon';\nimport useStyles, { sizes } from './Modal.styles';\n\nexport const MODAL_SIZES = sizes;\n\nexport interface ModalProps\n  extends DefaultProps,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'title'> {\n  /** Mounts modal if true */\n  opened: boolean;\n\n  /** Called when close button clicked and when escape key is pressed */\n  onClose(): void;\n\n  /** Modal title, displayed in header before close button */\n  title?: React.ReactNode;\n\n  /** Modal z-index property */\n  zIndex?: number;\n\n  /** Control vertical overflow behavior */\n  overflow?: 'outside' | 'inside';\n\n  /** Hides close button, modal still can be closed with escape key and by clicking outside */\n  hideCloseButton?: boolean;\n\n  /** Overlay below modal opacity, defaults to 0.75 in light theme and to 0.85 in dark theme */\n  overlayOpacity?: number;\n\n  /** Overlay below modal color, defaults to theme.black in light theme and to theme.colors.dark[9] in dark theme */\n  overlayColor?: string;\n\n  /** Modal body width */\n  size?: string | number;\n\n  /** Modal body transition */\n  transition?: MantineTransition;\n\n  /** Duration in ms of modal transitions, set to 0 to disable all animations */\n  transitionDuration?: number;\n\n  /** Modal body transitionTimingFunction, defaults to theme.transitionTimingFunction */\n  transitionTimingFunction?: string;\n\n  /** Close button aria-label and title attributes */\n  closeButtonLabel?: string;\n\n  /** id base, used to generate ids to connect modal title and body with aria- attributes, defaults to random id */\n  id?: string;\n}\n\nexport function MantineModal({\n  className,\n  opened,\n  themeOverride,\n  title,\n  onClose,\n  children,\n  hideCloseButton = false,\n  overlayOpacity,\n  size = 'md',\n  transitionDuration = 300,\n  closeButtonLabel,\n  overlayColor,\n  zIndex = 1000,\n  overflow = 'outside',\n  transition = 'slide-down',\n  id,\n  ...others\n}: ModalProps) {\n  const baseId = useId(id);\n  const titleId = `${baseId}-title`;\n  const bodyId = `${baseId}-body`;\n  const reduceMotion = useReducedMotion();\n  const theme = useMantineTheme(themeOverride);\n  const classes = useStyles({ size, overflow, theme });\n  const clickOutsideRef = useClickOutside(onClose);\n  const focusTrapRef = useFocusTrap();\n  const duration = reduceMotion ? 1 : transitionDuration;\n  const _overlayOpacity =\n    typeof overlayOpacity === 'number'\n      ? overlayOpacity\n      : theme.colorScheme === 'dark'\n      ? 0.85\n      : 0.75;\n\n  useScrollLock(opened);\n\n  return (\n    <GroupedTransition\n      mounted={opened}\n      transitions={{\n        modal: { duration, transition },\n        overlay: { duration: duration / 2, transition: 'fade', timingFunction: 'ease' },\n      }}\n    >\n      {(styles) => (\n        <div className={cx(classes.wrapper, className)} {...others}>\n          <div\n            data-mantine-modal-inner\n            className={classes.inner}\n            onKeyDownCapture={(event) => event.nativeEvent.code === 'Escape' && onClose()}\n            style={{ zIndex: zIndex + 1 }}\n            ref={focusTrapRef}\n          >\n            <Paper\n              className={classes.modal}\n              shadow=\"lg\"\n              role=\"dialog\"\n              aria-labelledby={titleId}\n              aria-describedby={bodyId}\n              aria-modal\n              style={styles.modal}\n              elementRef={clickOutsideRef}\n              tabIndex={-1}\n            >\n              {(title || !hideCloseButton) && (\n                <div data-mantine-modal-header className={classes.header}>\n                  <Text id={titleId} data-mantine-modal-title className={classes.title}>\n                    {title}\n                  </Text>\n\n                  {!hideCloseButton && (\n                    <ActionIcon onClick={onClose} aria-label={closeButtonLabel}>\n                      <CloseIcon />\n                    </ActionIcon>\n                  )}\n                </div>\n              )}\n\n              <div id={bodyId} className={classes.body}>\n                {children}\n              </div>\n            </Paper>\n          </div>\n\n          <div style={styles.overlay}>\n            <Overlay\n              color={\n                overlayColor || (theme.colorScheme === 'dark' ? theme.colors.dark[9] : theme.black)\n              }\n              opacity={_overlayOpacity}\n              zIndex={zIndex}\n            />\n          </div>\n        </div>\n      )}\n    </GroupedTransition>\n  );\n}\n\nexport function Modal(props: React.ComponentPropsWithoutRef<typeof MantineModal>) {\n  return (\n    <Portal zIndex={props.zIndex || 1000}>\n      <MantineModal {...props} />\n    </Portal>\n  );\n}\n\nModal.displayName = '@mantine/core/Modal';\n"],"names":["sizes","useId","useReducedMotion","theme","useMantineTheme","useStyles","useClickOutside","useFocusTrap","GroupedTransition","cx","Paper","Text","ActionIcon","CloseIcon","Overlay","Portal"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAmBa,cAAcA;sBAgDE,IAkBd;AAlBc,eAC3B;AAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,kBAAkB;AAAA,IAClB;AAAA,IACA,OAAO;AAAA,IACP,qBAAqB;AAAA,IACrB;AAAA,IACA;AAAA,IACA,SAAS;AAAA,IACT,WAAW;AAAA,IACX,aAAa;AAAA,IACb;AAAA,MAhB2B,IAiBxB,mBAjBwB,IAiBxB;AAAA,IAhBH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAGA,QAAM,SAASC,YAAM;AACrB,QAAM,UAAU,GAAG;AACnB,QAAM,SAAS,GAAG;AAClB,QAAM,eAAeC;AACrB,QAAMC,UAAQC,sBAAgB;AAC9B,QAAM,UAAUC,wBAAU,CAAE,MAAM,iBAAUF;AAC5C,QAAM,kBAAkBG,sBAAgB;AACxC,QAAM,eAAeC;AACrB,QAAM,WAAW,eAAe,IAAI;AACpC,QAAM,kBACJ,OAAO,mBAAmB,WACtB,iBACAJ,QAAM,gBAAgB,SACtB,OACA;AAEN,sBAAc;AAEd,sDACGK,qCAAD;AAAA,IACE,SAAS;AAAA,IACT,aAAa;AAAA,MACX,OAAO,CAAE,UAAU;AAAA,MACnB,SAAS,CAAE,UAAU,WAAW,GAAG,YAAY,QAAQ,gBAAgB;AAAA;AAAA,KAGxE,CAAC,wDACC,OAAD;AAAA,IAAK,WAAWC,YAAG,QAAQ,SAAS;AAAA,KAAgB,sDACjD,OAAD;AAAA,IACE,4BAAwB;AAAA,IACxB,WAAW,QAAQ;AAAA,IACnB,kBAAkB,CAAC,UAAU,MAAM,YAAY,SAAS,YAAY;AAAA,IACpE,OAAO,CAAE,QAAQ,SAAS;AAAA,IAC1B,KAAK;AAAA,kDAEJC,aAAD;AAAA,IACE,WAAW,QAAQ;AAAA,IACnB,QAAO;AAAA,IACP,MAAK;AAAA,IACL,mBAAiB;AAAA,IACjB,oBAAkB;AAAA,IAClB,cAAU;AAAA,IACV,OAAO,OAAO;AAAA,IACd,YAAY;AAAA,IACZ,UAAU;AAAA,KAER,UAAS,CAAC,iEACT,OAAD;AAAA,IAAK,6BAAyB;AAAA,IAAC,WAAW,QAAQ;AAAA,kDAC/CC,WAAD;AAAA,IAAM,IAAI;AAAA,IAAS,4BAAwB;AAAA,IAAC,WAAW,QAAQ;AAAA,KAC5D,QAGF,CAAC,gEACCC,uBAAD;AAAA,IAAY,SAAS;AAAA,IAAS,cAAY;AAAA,kDACvCC,qBAAD,sDAMP,OAAD;AAAA,IAAK,IAAI;AAAA,IAAQ,WAAW,QAAQ;AAAA,KACjC,0DAKN,OAAD;AAAA,IAAK,OAAO,OAAO;AAAA,kDAChBC,iBAAD;AAAA,IACE,OACE,yBAAuB,gBAAgB,SAASX,QAAM,OAAO,KAAK,KAAKA,QAAM;AAAA,IAE/E,SAAS;AAAA,IACT;AAAA;AAAA;eASQ,OAA4D;AAChF,sDACGY,eAAD;AAAA,IAAQ,QAAQ,MAAM,UAAU;AAAA,kDAC7B,cAAD,mBAAkB;AAAA;AAKxB,MAAM,cAAc;;;;;;"}