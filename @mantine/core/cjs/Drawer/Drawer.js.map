{"version":3,"file":"Drawer.js","sources":["../../src/Drawer/Drawer.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport cx from 'clsx';\nimport {\n  useClickOutside,\n  useScrollLock,\n  useMergedRef,\n  useReducedMotion,\n  useFocusTrap,\n} from '@mantine/hooks';\nimport { DefaultProps, useMantineTheme, MantineNumberSize } from '@mantine/theme';\nimport { Paper } from '../Paper/Paper';\nimport { Overlay } from '../Overlay/Overlay';\nimport { GroupedTransition, MantineTransition } from '../Transition/Transition';\nimport useStyles, { Position, sizes } from './Drawer.styles';\n\nexport const DRAWER_SIZES = sizes;\n\nexport interface DrawerProps extends DefaultProps, React.ComponentPropsWithoutRef<'div'> {\n  /** If true drawer is mounted to the dom */\n  opened: boolean;\n\n  /** Called when drawer is closed (Escape key and click outside, depending on options) */\n  onClose(): void;\n\n  /** Drawer body position */\n  position?: 'top' | 'left' | 'bottom' | 'right';\n\n  /** Drawer body width (right | left position) or height (top | bottom position), cannot exceed 100vh for height and 100% for width */\n  size?: string | number;\n\n  /** Drawer body shadow from theme or any css shadow value */\n  shadow?: string;\n\n  /** Drawer body padding from theme or number for padding in px */\n  padding?: MantineNumberSize;\n\n  /** Drawer z-index property */\n  zIndex?: number;\n\n  /** Disables focus trap */\n  noFocusTrap?: boolean;\n\n  /** Disables scroll lock */\n  noScrollLock?: boolean;\n\n  /** Disable onClock trigger for outside events */\n  noCloseOnClickOutside?: boolean;\n\n  /** Disable onClock trigger for escape key press */\n  noCloseOnEscape?: boolean;\n\n  /** Drawer appear and disappear transition, see Transition component for full documentation */\n  transition?: MantineTransition;\n\n  /** Transition duration in ms */\n  transitionDuration?: number;\n\n  /** Drawer transitionTimingFunction css property */\n  transitionTimingFunction?: string;\n\n  /** Removes overlay entirely */\n  noOverlay?: boolean;\n\n  /** Sets overlay opacity, defaults to 0.75 in light theme and to 0.85 in dark theme */\n  overlayOpacity?: number;\n\n  /** Sets overlay color, defaults to theme.black in light theme and to theme.colors.dark[9] in dark theme */\n  overlayColor?: string;\n}\n\nconst transitions: Record<Position, MantineTransition> = {\n  top: 'slide-down',\n  bottom: 'slide-up',\n  left: 'slide-right',\n  right: 'slide-left',\n};\n\nexport function Drawer({\n  opened,\n  onClose,\n  className,\n  themeOverride,\n  position = 'left',\n  size = 'md',\n  noFocusTrap = false,\n  noScrollLock = false,\n  noCloseOnClickOutside = false,\n  noCloseOnEscape = false,\n  transition,\n  transitionDuration = 250,\n  transitionTimingFunction = 'ease',\n  zIndex = 1000,\n  overlayColor,\n  overlayOpacity,\n  children,\n  noOverlay = false,\n  shadow = 'md',\n  padding = 0,\n  ...others\n}: DrawerProps) {\n  const theme = useMantineTheme(themeOverride);\n  const duration = useReducedMotion() ? 1 : transitionDuration;\n  const classes = useStyles({ theme, size, position });\n  const focusTrapRef = useFocusTrap(!noFocusTrap);\n  useScrollLock(opened && !noScrollLock);\n  const clickOutsideRef = useClickOutside(() => opened && !noCloseOnClickOutside && onClose());\n\n  const drawerTransition = transition || transitions[position];\n  const _overlayOpacity =\n    typeof overlayOpacity === 'number'\n      ? overlayOpacity\n      : theme.colorScheme === 'dark'\n      ? 0.85\n      : 0.75;\n\n  const closeOnEscape = (event: KeyboardEvent) => {\n    if (noFocusTrap && event.code === 'Escape' && !noCloseOnEscape) {\n      onClose();\n    }\n  };\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    // onKeyDownCapture event will not fire when focus trap is not active\n    if (noFocusTrap) {\n      window.addEventListener('keydown', closeOnEscape);\n      return () => window.removeEventListener('keydown', closeOnEscape);\n    }\n  }, [noFocusTrap]);\n\n  return (\n    <GroupedTransition\n      mounted={opened}\n      transitions={{\n        overlay: { duration: duration / 2, transition: 'fade', timingFunction: 'ease' },\n        drawer: {\n          duration,\n          transition: drawerTransition,\n          timingFunction: transitionTimingFunction,\n        },\n      }}\n    >\n      {(styles) => (\n        <div\n          className={cx(classes.wrapper, { [classes.noOverlay]: noOverlay }, className)}\n          role=\"dialog\"\n          aria-modal\n          {...others}\n        >\n          <Paper\n            className={cx(classes.drawer, className)}\n            elementRef={useMergedRef(focusTrapRef, clickOutsideRef)}\n            style={{ ...styles.drawer, zIndex: zIndex + 1 }}\n            radius={0}\n            tabIndex={-1}\n            onKeyDownCapture={(event) =>\n              event.nativeEvent.code === 'Escape' && !noCloseOnEscape && onClose()\n            }\n            shadow={shadow}\n            padding={padding}\n            themeOverride={themeOverride}\n          >\n            {children}\n          </Paper>\n\n          {!noOverlay && (\n            <div style={styles.overlay}>\n              <Overlay\n                opacity={_overlayOpacity}\n                zIndex={zIndex}\n                color={\n                  overlayColor ||\n                  (theme.colorScheme === 'dark' ? theme.colors.dark[9] : theme.black)\n                }\n              />\n            </div>\n          )}\n        </div>\n      )}\n    </GroupedTransition>\n  );\n}\n\nDrawer.displayName = '@mantine/core/Drawer';\n"],"names":["sizes","theme","useMantineTheme","useReducedMotion","useStyles","useFocusTrap","useClickOutside","GroupedTransition","cx","Paper","useMergedRef","Overlay"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAea,eAAeA;AAuD5B,MAAM,cAAmD;AAAA,EACvD,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,OAAO;AAAA;gBAGc,IAsBP;AAtBO,eACrB;AAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,WAAW;AAAA,IACX,OAAO;AAAA,IACP,cAAc;AAAA,IACd,eAAe;AAAA,IACf,wBAAwB;AAAA,IACxB,kBAAkB;AAAA,IAClB;AAAA,IACA,qBAAqB;AAAA,IACrB,2BAA2B;AAAA,IAC3B,SAAS;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA,IACA,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,UAAU;AAAA,MApBW,IAqBlB,mBArBkB,IAqBlB;AAAA,IApBH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAGA,QAAMC,UAAQC,sBAAgB;AAC9B,QAAM,WAAWC,2BAAqB,IAAI;AAC1C,QAAM,UAAUC,yBAAU,QAAEH,SAAO,MAAM;AACzC,QAAM,eAAeI,mBAAa,CAAC;AACnC,sBAAc,UAAU,CAAC;AACzB,QAAM,kBAAkBC,sBAAgB,MAAM,UAAU,CAAC,yBAAyB;AAElF,QAAM,mBAAmB,cAAc,YAAY;AACnD,QAAM,kBACJ,OAAO,mBAAmB,WACtB,iBACAL,QAAM,gBAAgB,SACtB,OACA;AAEN,QAAM,gBAAgB,CAAC,UAAyB;AAC9C,QAAI,eAAe,MAAM,SAAS,YAAY,CAAC,iBAAiB;AAC9D;AAAA;AAAA;AAKJ,kBAAU,MAAM;AAEd,QAAI,aAAa;AACf,aAAO,iBAAiB,WAAW;AACnC,aAAO,MAAM,OAAO,oBAAoB,WAAW;AAAA;AAAA,KAEpD,CAAC;AAEJ,iEACGM,qCAAD;AAAA,IACE,SAAS;AAAA,IACT,aAAa;AAAA,MACX,SAAS,CAAE,UAAU,WAAW,GAAG,YAAY,QAAQ,gBAAgB;AAAA,MACvE,QAAQ;AAAA,QACN;AAAA,QACA,YAAY;AAAA,QACZ,gBAAgB;AAAA;AAAA;AAAA,KAInB,CAAC,mEACC,OAAD;AAAA,IACE,WAAWC,uBAAG,QAAQ,SAAS,EAAG,QAAQ,YAAY,YAAa;AAAA,IACnE,MAAK;AAAA,IACL,cAAU;AAAA,KACN,iEAEHC,aAAD;AAAA,IACE,WAAWD,uBAAG,QAAQ,QAAQ;AAAA,IAC9B,YAAYE,mBAAa,cAAc;AAAA,IACvC,OAAO,iCAAK,OAAO,SAAZ,CAAoB,QAAQ,SAAS;AAAA,IAC5C,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,kBAAkB,CAAC,UACjB,MAAM,YAAY,SAAS,YAAY,CAAC,mBAAmB;AAAA,IAE7D;AAAA,IACA;AAAA,IACA;AAAA,KAEC,WAGF,CAAC,qEACC,OAAD;AAAA,IAAK,OAAO,OAAO;AAAA,6DAChBC,iBAAD;AAAA,IACE,SAAS;AAAA,IACT;AAAA,IACA,OACE,yBACO,gBAAgB,SAASV,QAAM,OAAO,KAAK,KAAKA,QAAM;AAAA;AAAA;AAW/E,OAAO,cAAc;;;;;"}