{"version":3,"file":"Popover.js","sources":["../../src/Popover/Popover.tsx"],"sourcesContent":["import React from 'react';\nimport cx from 'clsx';\nimport { DefaultProps, useMantineTheme, MantineNumberSize } from '@mantine/theme';\nimport { useClickOutside, useFocusTrap, useId, useReducedMotion } from '@mantine/hooks';\nimport { MantineTransition, Transition } from '../Transition/Transition';\nimport { Text } from '../Text/Text';\nimport { ActionIcon } from '../ActionIcon/ActionIcon';\nimport { CloseIcon } from '../Modal/CloseIcon';\nimport useStyles from './Popover.styles';\n\nexport interface PopoverProps\n  extends DefaultProps,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'title'> {\n  /** Disable closing by click outside */\n  noClickOutside?: boolean;\n\n  /** Disable focus trap (may impact close on escape feature) */\n  noFocusTrap?: boolean;\n\n  /** Disables close on escape */\n  noEscape?: boolean;\n\n  /** Adds close button */\n  withCloseButton?: boolean;\n\n  /** True to disable popover */\n  disabled?: boolean;\n\n  /** Popover placement relative to target */\n  placement?: 'center' | 'end' | 'start';\n\n  /** Popover position relative to target */\n  position?: 'left' | 'right' | 'top' | 'bottom';\n\n  /** Space between popover and target in px */\n  gutter?: number;\n\n  /** Customize mount/unmount transition */\n  transition?: MantineTransition;\n\n  /** Mount/unmount transition duration in ms */\n  transitionDuration?: number;\n\n  /** Mount/unmount transition timing function, defaults to theme.transitionTimingFunction */\n  transitionTimingFunction?: string;\n\n  /** Adds arrow, arrow position depends on position and placement props */\n  withArrow?: boolean;\n\n  /** Arrow size in px */\n  arrowSize?: number;\n\n  /** Popover z-index */\n  zIndex?: number;\n\n  /** True to display popover */\n  opened: boolean;\n\n  /** Called when popover closes */\n  onClose?(): void;\n\n  /** Element which is used to position popover */\n  target: React.ReactNode;\n\n  /** Content inside popover */\n  children: React.ReactNode;\n\n  /** Optional popover title */\n  title?: React.ReactNode;\n\n  /** Popover body padding, value from theme.spacing or number to set padding in px */\n  spacing?: MantineNumberSize;\n\n  /** Popover body radius, value from theme.radius or number to set border-radius in px */\n  radius?: MantineNumberSize;\n\n  /** Popover shadow, value from theme.shadows or string to set box-shadow to any value */\n  shadow?: string;\n\n  /** Popover body styles */\n  bodyStyle?: React.CSSProperties;\n\n  /** Popover body className */\n  bodyClassName?: string;\n\n  /** aria-label for close button */\n  closeButtonLabel?: string;\n}\n\nexport function Popover({\n  className,\n  themeOverride,\n  children,\n  target,\n  title,\n  onClose,\n  opened,\n  zIndex = 1000,\n  arrowSize = 4,\n  withArrow = false,\n  transition = 'fade',\n  transitionDuration = 200,\n  transitionTimingFunction,\n  gutter = 10,\n  position = 'left',\n  placement = 'center',\n  disabled = false,\n  noClickOutside = false,\n  noFocusTrap = false,\n  noEscape = false,\n  withCloseButton = false,\n  radius = 'sm',\n  spacing = 'md',\n  shadow = 'sm',\n  bodyStyle,\n  bodyClassName,\n  closeButtonLabel,\n  id,\n  ...others\n}: PopoverProps) {\n  const theme = useMantineTheme(themeOverride);\n  const classes = useStyles({ theme, gutter, arrowSize, radius, spacing, shadow });\n  const handleClose = () => typeof onClose === 'function' && onClose();\n  const useClickOutsideRef = useClickOutside(() => !noClickOutside && handleClose());\n  const focusTrapRef = useFocusTrap(!noFocusTrap);\n  const reduceMotion = useReducedMotion();\n\n  const handleKeydown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    if (!noEscape && event.nativeEvent.code === 'Escape') {\n      handleClose();\n    }\n  };\n\n  const uuid = useId(id);\n  const titleId = `${uuid}-title`;\n  const bodyId = `${uuid}-body`;\n\n  return (\n    <div className={cx(classes.wrapper, className)} ref={useClickOutsideRef} id={id} {...others}>\n      <Transition\n        mounted={opened && !disabled}\n        transition={transition}\n        duration={reduceMotion ? 0 : transitionDuration}\n        timingFunction={transitionTimingFunction || theme.transitionTimingFunction}\n      >\n        {(transitionStyles) => (\n          <div\n            style={transitionStyles}\n            role=\"dialog\"\n            tabIndex={-1}\n            data-mantine-popover\n            aria-labelledby={titleId}\n            aria-describedby={bodyId}\n            className={classes.popoverWrapper}\n            ref={focusTrapRef}\n            onKeyDownCapture={handleKeydown}\n          >\n            <div\n              className={cx(classes.popover, classes[position], classes[placement], bodyClassName)}\n              style={{ zIndex, ...bodyStyle }}\n            >\n              {withArrow && <div data-mantine-popover-arrow className={classes.arrow} />}\n\n              <div className={classes.body}>\n                {!!title && (\n                  <div className={classes.header} data-mantine-popover-header>\n                    <Text size=\"sm\" id={titleId} data-mantine-popover-title>\n                      {title}\n                    </Text>\n                  </div>\n                )}\n\n                {withCloseButton && (\n                  <ActionIcon\n                    size=\"sm\"\n                    data-mantine-popover-close\n                    onClick={handleClose}\n                    aria-label={closeButtonLabel}\n                    className={cx(classes.closeButton)}\n                  >\n                    <CloseIcon style={{ width: 14, height: 14 }} />\n                  </ActionIcon>\n                )}\n                <div className={classes.inner} id={bodyId} data-mantine-popover-body>\n                  {children}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </Transition>\n\n      <div data-mantine-popover-target className={classes.target}>\n        {target}\n      </div>\n    </div>\n  );\n}\n\nPopover.displayName = '@mantine/core/Popover';\n"],"names":["theme","useMantineTheme","useStyles","useClickOutside","useFocusTrap","useReducedMotion","useId","cx","Transition","Text","ActionIcon","CloseIcon"],"mappings":"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"}