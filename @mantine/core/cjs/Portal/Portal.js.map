{"version":3,"file":"Portal.js","sources":["../../src/Portal/Portal.tsx"],"sourcesContent":["import React, { useRef, useState, useLayoutEffect, useEffect, ReactPortal } from 'react';\nimport { createPortal } from 'react-dom';\n\nexport interface PortalProps {\n  /** Portal children, for example, modal or popover */\n  children: React.ReactNode;\n\n  /** Root element z-index property */\n  zIndex?: number;\n\n  /** Element where portal should be rendered, by default new div element is created and appended to document.body */\n  target?: HTMLDivElement;\n\n  /** Root element className */\n  className?: string;\n}\n\n// useLayoutEffect is required for Portal to appear after hydration\n// useLayoutEffect will show warning if used during ssr, e.g. with Next.js\n// useIsomorphicEffect removes it by replacing useLayoutEffect with useEffect during ssr\nconst useIsomorphicEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport function Portal({ children, zIndex = 1, target, className }: PortalProps): ReactPortal {\n  const [mounted, setMounted] = useState(false);\n  const elementRef = useRef<HTMLDivElement>();\n\n  useIsomorphicEffect(() => {\n    setMounted(true);\n    elementRef.current = target || document.createElement('div');\n    if (!target) {\n      document.body.appendChild(elementRef.current);\n    }\n    return () => {\n      !target && document.body.removeChild(elementRef.current);\n    };\n  }, [target]);\n\n  if (!mounted) {\n    return null;\n  }\n\n  return createPortal(\n    <div className={className} style={{ position: 'relative', zIndex }} data-mantine-portal>\n      {children}\n    </div>,\n    elementRef.current\n  );\n}\n\nPortal.displayName = '@mantine/core/Portal';\n"],"names":["useLayoutEffect","useEffect","useState","useRef","createPortal"],"mappings":";;;;;;;;;;;AAoBA,MAAM,sBAAsB,OAAO,aAAa,cAAcA,wBAAkBC;gBAEzD,CAAE,UAAU,SAAS,GAAG,QAAQ,YAAuC;AAC5F,QAAM,CAAC,SAAS,cAAcC,eAAS;AACvC,QAAM,aAAaC;AAEnB,sBAAoB,MAAM;AACxB,eAAW;AACX,eAAW,UAAU,UAAU,SAAS,cAAc;AACtD,QAAI,CAAC,QAAQ;AACX,eAAS,KAAK,YAAY,WAAW;AAAA;AAEvC,WAAO,MAAM;AACX,OAAC,UAAU,SAAS,KAAK,YAAY,WAAW;AAAA;AAAA,KAEjD,CAAC;AAEJ,MAAI,CAAC,SAAS;AACZ,WAAO;AAAA;AAGT,SAAOC,8EACJ,OAAD;AAAA,IAAK;AAAA,IAAsB,OAAO,CAAE,UAAU,YAAY;AAAA,IAAU,uBAAmB;AAAA,KACpF,WAEH,WAAW;AAAA;AAIf,OAAO,cAAc;;;;"}