{"version":3,"file":"SegmentedControl.js","sources":["../../src/SegmentedControl/SegmentedControl.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport cx from 'clsx';\nimport { useId, useReducedMotion } from '@mantine/hooks';\nimport { DefaultProps, MantineNumberSize, MantineSize, useMantineTheme } from '@mantine/theme';\nimport useStyles, { WRAPPER_PADDING } from './SegmentedControl.styles';\n\ninterface SegmentedControlItem {\n  value: string;\n  label: React.ReactNode;\n}\n\nexport interface SegmentedControlProps\n  extends DefaultProps,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'value' | 'onChange'> {\n  /** Data based on which controls are rendered */\n  data: SegmentedControlItem[];\n\n  /** Current selected value */\n  value: string;\n\n  /** Called when value changes */\n  onChange(value: string): void;\n\n  /** Name of the radio group, default to random id */\n  name?: string;\n\n  /** True if component should have 100% width */\n  fullWidth?: boolean;\n\n  /** Active control color from theme, defaults to white in light color scheme and theme.colors.dark[9] in dark */\n  color?: string;\n\n  /** Controls font-size, paddings and height */\n  size?: MantineSize;\n\n  /** Border-radius from theme or number to set border-radius in px */\n  radius?: MantineNumberSize;\n\n  /** Transition duration in ms, set to 0 to turn off transitions */\n  transitionDuration?: number;\n\n  /** Transition timing function for all transitions, defaults to theme.transitionTimingFunction */\n  transitionTimingFunction?: string;\n}\n\nexport function SegmentedControl({\n  className,\n  themeOverride,\n  data,\n  name,\n  value,\n  onChange,\n  color,\n  fullWidth,\n  radius = 'sm',\n  size = 'sm',\n  transitionDuration = 200,\n  transitionTimingFunction,\n  ...others\n}: SegmentedControlProps) {\n  // reduce motion should be implemented via js, there is a bug in jss with media queries\n  // https://github.com/cssinjs/jss/issues/1320\n  const reduceMotion = useReducedMotion();\n  const theme = useMantineTheme(themeOverride);\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n\n  const classes = useStyles({\n    theme,\n    size,\n    fullWidth,\n    color,\n    radius,\n    reduceMotion: reduceMotion || !shouldAnimate,\n    transitionDuration,\n    transitionTimingFunction,\n  });\n\n  const [activePosition, setActivePosition] = useState({ width: 0, translate: 0 });\n  const uuid = useId(name);\n  const refs = useRef<Record<string, HTMLLabelElement>>({});\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const observer = new ResizeObserver(() => {\n      if (value in refs.current && wrapperRef.current) {\n        const element = refs.current[value];\n        const rect = element.getBoundingClientRect();\n        setActivePosition({\n          width: rect.width,\n          translate: rect.x - wrapperRef.current.getBoundingClientRect().x - WRAPPER_PADDING,\n        });\n\n        if (!shouldAnimate) {\n          setTimeout(() => {\n            setShouldAnimate(true);\n          }, 4);\n        }\n      }\n    });\n    observer.observe(wrapperRef.current);\n    return () => observer.disconnect();\n  }, [value]);\n\n  const controls = data.map((item) => (\n    <div\n      className={cx(classes.control, { [classes.controlActive]: value === item.value })}\n      key={item.value}\n    >\n      <input\n        data-mantine-radio\n        className={classes.input}\n        type=\"radio\"\n        name={uuid}\n        value={item.value}\n        id={`${uuid}-${item.value}`}\n        checked={value === item.value}\n        onChange={() => onChange(item.value)}\n      />\n\n      <label\n        data-mantine-label\n        className={cx(classes.label, { [classes.labelActive]: value === item.value })}\n        htmlFor={`${uuid}-${item.value}`}\n        ref={(node) => {\n          refs.current[item.value] = node;\n        }}\n      >\n        {item.label}\n      </label>\n    </div>\n  ));\n\n  return (\n    <div className={cx(classes.wrapper, className)} ref={wrapperRef} {...others}>\n      {!!value && (\n        <span\n          data-mantine-active\n          className={classes.active}\n          style={{\n            width: activePosition.width,\n            transform: `translateX(${activePosition.translate}px)`,\n          }}\n        />\n      )}\n\n      {controls}\n    </div>\n  );\n}\n\nSegmentedControl.displayName = '@mantine/core/SegmentedControl';\n"],"names":["useReducedMotion","theme","useMantineTheme","useState","useStyles","useId","useRef","WRAPPER_PADDING","cx"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BA6CiC,IAcP;AAdO,eAC/B;AAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,SAAS;AAAA,IACT,OAAO;AAAA,IACP,qBAAqB;AAAA,IACrB;AAAA,MAZ+B,IAa5B,mBAb4B,IAa5B;AAAA,IAZH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAKA,QAAM,eAAeA;AACrB,QAAMC,UAAQC,sBAAgB;AAC9B,QAAM,CAAC,eAAe,oBAAoBC,eAAS;AAEnD,QAAM,UAAUC,mCAAU;AAAA,WACxBH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,cAAc,gBAAgB,CAAC;AAAA,IAC/B;AAAA,IACA;AAAA;AAGF,QAAM,CAAC,gBAAgB,qBAAqBE,eAAS,CAAE,OAAO,GAAG,WAAW;AAC5E,QAAM,OAAOE,YAAM;AACnB,QAAM,OAAOC,aAAyC;AACtD,QAAM,aAAaA,aAAuB;AAE1C,kBAAU,MAAM;AACd,UAAM,WAAW,IAAI,eAAe,MAAM;AACxC,UAAI,SAAS,KAAK,WAAW,WAAW,SAAS;AAC/C,cAAM,UAAU,KAAK,QAAQ;AAC7B,cAAM,OAAO,QAAQ;AACrB,0BAAkB;AAAA,UAChB,OAAO,KAAK;AAAA,UACZ,WAAW,KAAK,IAAI,WAAW,QAAQ,wBAAwB,IAAIC;AAAA;AAGrE,YAAI,CAAC,eAAe;AAClB,qBAAW,MAAM;AACf,6BAAiB;AAAA,aAChB;AAAA;AAAA;AAAA;AAIT,aAAS,QAAQ,WAAW;AAC5B,WAAO,MAAM,SAAS;AAAA,KACrB,CAAC;AAEJ,QAAM,WAAW,KAAK,IAAI,CAAC,sDACxB,OAAD;AAAA,IACE,WAAWC,YAAG,QAAQ,SAAS,EAAG,QAAQ,gBAAgB,UAAU,KAAK;AAAA,IACzE,KAAK,KAAK;AAAA,kDAET,SAAD;AAAA,IACE,sBAAkB;AAAA,IAClB,WAAW,QAAQ;AAAA,IACnB,MAAK;AAAA,IACL,MAAM;AAAA,IACN,OAAO,KAAK;AAAA,IACZ,IAAI,GAAG,QAAQ,KAAK;AAAA,IACpB,SAAS,UAAU,KAAK;AAAA,IACxB,UAAU,MAAM,SAAS,KAAK;AAAA,mDAG/B,SAAD;AAAA,IACE,sBAAkB;AAAA,IAClB,WAAWA,YAAG,QAAQ,OAAO,EAAG,QAAQ,cAAc,UAAU,KAAK;AAAA,IACrE,SAAS,GAAG,QAAQ,KAAK;AAAA,IACzB,KAAK,CAAC,SAAS;AACb,WAAK,QAAQ,KAAK,SAAS;AAAA;AAAA,KAG5B,KAAK;AAKZ,sDACG,OAAD;AAAA,IAAK,WAAWA,YAAG,QAAQ,SAAS;AAAA,IAAY,KAAK;AAAA,KAAgB,SAClE,CAAC,CAAC,sDACA,QAAD;AAAA,IACE,uBAAmB;AAAA,IACnB,WAAW,QAAQ;AAAA,IACnB,OAAO;AAAA,MACL,OAAO,eAAe;AAAA,MACtB,WAAW,cAAc,eAAe;AAAA;AAAA,MAK7C;AAAA;AAKP,iBAAiB,cAAc;;;;"}