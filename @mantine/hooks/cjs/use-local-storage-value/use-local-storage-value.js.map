{"version":3,"file":"use-local-storage-value.js","sources":["../../src/use-local-storage-value/use-local-storage-value.ts"],"sourcesContent":["import { useState } from 'react';\nimport { useWindowEvent } from '../use-window-event/use-window-event';\n\nexport function useLocalStorageValue<T extends string>({\n  key,\n  defaultValue = null,\n}: {\n  key: string;\n  defaultValue?: T;\n}) {\n  const [value, setValue] = useState<T>(\n    typeof window !== 'undefined' && 'localStorage' in window\n      ? (window.localStorage.getItem(key) as T)\n      : defaultValue\n  );\n\n  const setLocalStorageValue = (val: T | ((prevState: T) => T)) => {\n    if (typeof val === 'function') {\n      setValue((current) => {\n        const result = val(current);\n        window.localStorage.setItem(key, result);\n        return result;\n      });\n    } else {\n      window.localStorage.setItem(key, val);\n      setValue(val);\n    }\n  };\n\n  useWindowEvent('storage', (event) => {\n    if (event.storageArea === window.localStorage && event.key === key) {\n      setValue(event.newValue as T);\n    }\n  });\n\n  return [value, setLocalStorageValue] as const;\n}\n"],"names":["useState"],"mappings":";;;;;;;8BAGuD;AAAA,EACrD;AAAA,EACA,eAAe;AAAA,GAId;AACD,QAAM,CAAC,OAAO,YAAYA,eACxB,OAAO,WAAW,eAAe,kBAAkB,SAC9C,OAAO,aAAa,QAAQ,OAC7B;AAGN,QAAM,uBAAuB,CAAC,QAAmC;AAC/D,QAAI,OAAO,QAAQ,YAAY;AAC7B,eAAS,CAAC,YAAY;AACpB,cAAM,SAAS,IAAI;AACnB,eAAO,aAAa,QAAQ,KAAK;AACjC,eAAO;AAAA;AAAA,WAEJ;AACL,aAAO,aAAa,QAAQ,KAAK;AACjC,eAAS;AAAA;AAAA;AAIb,gCAAe,WAAW,CAAC,UAAU;AACnC,QAAI,MAAM,gBAAgB,OAAO,gBAAgB,MAAM,QAAQ,KAAK;AAClE,eAAS,MAAM;AAAA;AAAA;AAInB,SAAO,CAAC,OAAO;AAAA;;;;"}