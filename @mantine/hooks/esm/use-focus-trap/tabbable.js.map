{"version":3,"file":"tabbable.js","sources":["../../src/use-focus-trap/tabbable.ts"],"sourcesContent":["const TABBABLE_NODES = /input|select|textarea|button|object/;\nexport const FOCUS_SELECTOR = 'a, input, select, textarea, button, object, [tabindex]';\n\nfunction hidden(element: HTMLElement) {\n  if (process.env.NODE_ENV === 'test') {\n    return false;\n  }\n\n  return (\n    (element.offsetWidth <= 0 && element.offsetHeight <= 0) || element.style.display === 'none'\n  );\n}\n\nfunction visible(element: HTMLElement) {\n  let parentElement: HTMLElement = element;\n  while (parentElement) {\n    if (parentElement === document.body) {\n      break;\n    }\n\n    if (hidden(parentElement)) {\n      return false;\n    }\n\n    parentElement = parentElement.parentNode as HTMLElement;\n  }\n\n  return true;\n}\n\nfunction getElementTabIndex(element: HTMLElement) {\n  let tabIndex = element.getAttribute('tabindex');\n  if (tabIndex === null) {\n    tabIndex = undefined;\n  }\n  return parseInt(tabIndex, 10);\n}\n\nexport function focusable(element: HTMLElement) {\n  const nodeName = element.nodeName.toLowerCase();\n  const isTabIndexNotNaN = !Number.isNaN(getElementTabIndex(element));\n  const res =\n    // @ts-ignore\n    (TABBABLE_NODES.test(nodeName) && !element.disabled) ||\n    (element instanceof HTMLAnchorElement ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n\n  return res && visible(element);\n}\n\nexport function tabbable(element: HTMLElement) {\n  const tabIndex = getElementTabIndex(element);\n  const isTabIndexNaN = Number.isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element);\n}\n\nexport function findTabbableDescendants(element: HTMLElement): HTMLElement[] {\n  return Array.from(element.querySelectorAll<HTMLElement>(FOCUS_SELECTOR)).filter(tabbable);\n}\n"],"names":[],"mappings":"AAAA,MAAM,iBAAiB;MACV,iBAAiB;AAE9B,gBAAgB,SAAsB;AACpC,MAAI,QAAQ,IAAI,aAAa,QAAQ;AACnC,WAAO;AAAA;AAGT,SACG,QAAQ,eAAe,KAAK,QAAQ,gBAAgB,KAAM,QAAQ,MAAM,YAAY;AAAA;AAIzF,iBAAiB,SAAsB;AACrC,MAAI,gBAA6B;AACjC,SAAO,eAAe;AACpB,QAAI,kBAAkB,SAAS,MAAM;AACnC;AAAA;AAGF,QAAI,OAAO,gBAAgB;AACzB,aAAO;AAAA;AAGT,oBAAgB,cAAc;AAAA;AAGhC,SAAO;AAAA;AAGT,4BAA4B,SAAsB;AAChD,MAAI,WAAW,QAAQ,aAAa;AACpC,MAAI,aAAa,MAAM;AACrB,eAAW;AAAA;AAEb,SAAO,SAAS,UAAU;AAAA;mBAGF,SAAsB;AAC9C,QAAM,WAAW,QAAQ,SAAS;AAClC,QAAM,mBAAmB,CAAC,OAAO,MAAM,mBAAmB;AAC1D,QAAM,MAEH,eAAe,KAAK,aAAa,CAAC,QAAQ,gCACvB,oBAAoB,QAAQ,QAAQ,mBAAmB;AAE7E,SAAO,OAAO,QAAQ;AAAA;kBAGC,SAAsB;AAC7C,QAAM,WAAW,mBAAmB;AACpC,QAAM,gBAAgB,OAAO,MAAM;AACnC,SAAQ,kBAAiB,YAAY,MAAM,UAAU;AAAA;iCAGf,SAAqC;AAC3E,SAAO,MAAM,KAAK,QAAQ,iBAA8B,iBAAiB,OAAO;AAAA;;;;"}