{"version":3,"file":"use-scroll-lock.js","sources":["../../src/use-scroll-lock/use-scroll-lock.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\n// touch devices do not support overflow: hidden on body element\n// instead we need to prevent default for touchmove event:\n// https://stackoverflow.com/a/49853392\nconst preventDefault = (event: TouchEvent) => {\n  event.preventDefault();\n};\n\nexport function useScrollLock(lock: boolean, options = { disableTouchEvents: false }) {\n  // value is stored to prevent body overflow styles override with initial useScrollLock(false)\n  const locked = useRef(false);\n\n  // after scroll is unlocked body overflow style returns to the previous known value\n  const bodyOverflow = useRef<React.CSSProperties['overflow']>(null);\n\n  const unlockScroll = () => {\n    if (locked.current) {\n      locked.current = false;\n      document.body.style.overflow = bodyOverflow.current || '';\n\n      if (options.disableTouchEvents) {\n        document.body.removeEventListener('touchmove', preventDefault);\n      }\n    }\n  };\n\n  const lockScroll = () => {\n    locked.current = true;\n    bodyOverflow.current = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n\n    if (options.disableTouchEvents) {\n      document.body.addEventListener('touchmove', preventDefault, { passive: false });\n    }\n  };\n\n  useEffect(() => {\n    if (lock) {\n      lockScroll();\n    } else {\n      unlockScroll();\n    }\n\n    return unlockScroll;\n  }, [lock]);\n}\n"],"names":[],"mappings":";;AAKA,MAAM,iBAAiB,CAAC,UAAsB;AAC5C,QAAM;AAAA;uBAGsB,MAAe,UAAU,CAAE,oBAAoB,QAAS;AAEpF,QAAM,SAAS,OAAO;AAGtB,QAAM,eAAe,OAAwC;AAE7D,QAAM,eAAe,MAAM;AACzB,QAAI,OAAO,SAAS;AAClB,aAAO,UAAU;AACjB,eAAS,KAAK,MAAM,WAAW,aAAa,WAAW;AAEvD,UAAI,QAAQ,oBAAoB;AAC9B,iBAAS,KAAK,oBAAoB,aAAa;AAAA;AAAA;AAAA;AAKrD,QAAM,aAAa,MAAM;AACvB,WAAO,UAAU;AACjB,iBAAa,UAAU,SAAS,KAAK,MAAM;AAC3C,aAAS,KAAK,MAAM,WAAW;AAE/B,QAAI,QAAQ,oBAAoB;AAC9B,eAAS,KAAK,iBAAiB,aAAa,gBAAgB,CAAE,SAAS;AAAA;AAAA;AAI3E,YAAU,MAAM;AACd,QAAI,MAAM;AACR;AAAA,WACK;AACL;AAAA;AAGF,WAAO;AAAA,KACN,CAAC;AAAA;;;;"}