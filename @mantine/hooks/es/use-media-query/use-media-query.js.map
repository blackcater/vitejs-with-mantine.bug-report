{"version":3,"file":"use-media-query.js","sources":["../../src/use-media-query/use-media-query.ts"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\ntype MediaQueryCallback = (event: { matches: boolean; media: string }) => void;\n\n/**\n * Older versions of Safari (shipped withCatalina and before) do not support addEventListener on matchMedia\n * https://stackoverflow.com/questions/56466261/matchmedia-addlistener-marked-as-deprecated-addeventlistener-equivalent\n * */\nfunction attachMediaListener(query: MediaQueryList, callback: MediaQueryCallback) {\n  try {\n    query.addEventListener('change', callback);\n    return () => query.removeEventListener('change', callback);\n  } catch (e) {\n    query.addListener(callback);\n    return () => query.removeListener(callback);\n  }\n}\n\nfunction getInitialValue(query: string) {\n  if (typeof window !== 'undefined' && 'matchMedia' in window) {\n    return window.matchMedia(query).matches;\n  }\n  return false;\n}\n\nexport function useMediaQuery(query: string) {\n  const [matches, setMatches] = useState(getInitialValue(query));\n  const queryRef = useRef<MediaQueryList>();\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if ('matchMedia' in window) {\n      queryRef.current = window.matchMedia(query);\n      setMatches(queryRef.current.matches);\n      return attachMediaListener(queryRef.current, (event) => setMatches(event.matches));\n    }\n  }, [query]);\n\n  return matches;\n}\n"],"names":[],"mappings":";;AAQA,6BAA6B,OAAuB,UAA8B;AAChF,MAAI;AACF,UAAM,iBAAiB,UAAU;AACjC,WAAO,MAAM,MAAM,oBAAoB,UAAU;AAAA,WAC1C,GAAP;AACA,UAAM,YAAY;AAClB,WAAO,MAAM,MAAM,eAAe;AAAA;AAAA;AAItC,yBAAyB,OAAe;AACtC,MAAI,OAAO,WAAW,eAAe,gBAAgB,QAAQ;AAC3D,WAAO,OAAO,WAAW,OAAO;AAAA;AAElC,SAAO;AAAA;uBAGqB,OAAe;AAC3C,QAAM,CAAC,SAAS,cAAc,SAAS,gBAAgB;AACvD,QAAM,WAAW;AAGjB,YAAU,MAAM;AACd,QAAI,gBAAgB,QAAQ;AAC1B,eAAS,UAAU,OAAO,WAAW;AACrC,iBAAW,SAAS,QAAQ;AAC5B,aAAO,oBAAoB,SAAS,SAAS,CAAC,UAAU,WAAW,MAAM;AAAA;AAAA,KAE1E,CAAC;AAEJ,SAAO;AAAA;;;;"}