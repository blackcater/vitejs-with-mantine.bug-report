{"version":3,"file":"TagEdit.js","sources":["../../src/TagEdit/TagEdit.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useClickOutside, useFocusTrap } from '@mantine/hooks';\nimport {\n  Paper,\n  TextInput,\n  ActionIcon,\n  ColorSwatch,\n  useMantineTheme,\n  MantineThemeOverride,\n} from '@mantine/core';\nimport { CheckIcon } from './CheckIcon';\nimport { TagPickerColor, TagPickerTag } from '../types';\nimport useStyles from './TagEdit.styles';\n\nexport interface TagEditProps {\n  style?: React.CSSProperties;\n  initialValues: TagPickerTag;\n  colors: TagPickerColor[];\n  deleteLabel: string;\n  tagNameEditLabel?: string;\n  saveLabel: string;\n  onTagUpdate(id: string, values: Omit<TagPickerTag, 'id'>): void;\n  onTagDelete(id: string): void;\n  onClose(): void;\n  id: string;\n  themeOverride?: MantineThemeOverride;\n  enableDelete?: boolean;\n  enableColorChange?: boolean;\n}\n\nexport function TagEdit({\n  style,\n  onClose,\n  initialValues,\n  deleteLabel,\n  colors,\n  onTagUpdate,\n  onTagDelete,\n  id,\n  saveLabel,\n  tagNameEditLabel,\n  themeOverride,\n  enableDelete,\n  enableColorChange,\n}: TagEditProps) {\n  const theme = useMantineTheme(themeOverride);\n  const classes = useStyles({ theme });\n  const dropdownRef = useClickOutside(onClose);\n  const focusTrapRef = useFocusTrap();\n  const [values, setValues] = useState<Omit<TagPickerTag, 'id'>>({ name: '', color: '' });\n  const handleNameChange = (value: string) => setValues((current) => ({ ...current, name: value }));\n  const handleColorChange = (value: string) =>\n    setValues((current) => ({ ...current, color: value }));\n\n  const handleSubmit = () => {\n    onTagUpdate(id, { name: values.name, color: values.color });\n    onClose();\n  };\n\n  const handleDelete = () => {\n    onTagDelete(id);\n    onClose();\n  };\n\n  const handleKeyDownCapture = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    if (event.nativeEvent.code === 'Escape') {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    setValues(initialValues);\n  }, [initialValues]);\n\n  const colorsList = colors.map((color) => (\n    <button\n      data-mantine-tag-color\n      className={classes.colorControl}\n      type=\"button\"\n      key={color.color}\n      onClick={() => handleColorChange(color.color)}\n    >\n      <div className={classes.colorControlBody}>\n        <ColorSwatch color={theme.colors[color.color][5]} size={18} themeOverride={themeOverride} />\n        <span data-mantine-tag-color-label className={classes.colorLabel}>\n          {color.name}\n        </span>\n      </div>\n      {color.color === values.color && <CheckIcon style={{ width: 14, height: 14 }} />}\n    </button>\n  ));\n\n  return (\n    <Paper\n      shadow=\"sm\"\n      className={classes.tagEdit}\n      elementRef={dropdownRef}\n      onKeyDownCapture={handleKeyDownCapture}\n      style={style}\n      themeOverride={themeOverride}\n    >\n      <div ref={focusTrapRef}>\n        <div className={classes.header}>\n          <TextInput\n            data-mantine-tag-input\n            className={classes.input}\n            value={values.name}\n            onChange={(event) => handleNameChange(event.currentTarget.value)}\n            onKeyDown={(event) => event.nativeEvent.code === 'Enter' && handleSubmit()}\n            autoFocus\n            aria-label={tagNameEditLabel}\n            themeOverride={themeOverride}\n          />\n\n          <ActionIcon\n            data-mantine-tag-save\n            size={36}\n            variant={theme.colorScheme === 'dark' ? 'transparent' : 'light'}\n            onClick={handleSubmit}\n            themeOverride={themeOverride}\n            aria-label={saveLabel}\n          >\n            <CheckIcon style={{ width: 16, height: 16 }} />\n          </ActionIcon>\n        </div>\n\n        {enableDelete && (\n          <button\n            data-mantine-tag-delete\n            className={classes.deleteControl}\n            type=\"button\"\n            onClick={handleDelete}\n          >\n            {deleteLabel}\n          </button>\n        )}\n\n        {enableColorChange && (\n          <div data-mantine-tag-colors className={classes.colorsList}>\n            {colorsList}\n          </div>\n        )}\n      </div>\n    </Paper>\n  );\n}\n\nTagEdit.displayName = '@mantine/tag-picker/TagEdit';\n"],"names":["useMantineTheme","useStyles","useClickOutside","useFocusTrap","useState","ColorSwatch","CheckIcon","Paper","TextInput","ActionIcon"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iBA8BwB;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GACe;AACf,QAAM,QAAQA,qBAAgB;AAC9B,QAAM,UAAUC,0BAAU,CAAE;AAC5B,QAAM,cAAcC,sBAAgB;AACpC,QAAM,eAAeC;AACrB,QAAM,CAAC,QAAQ,aAAaC,eAAmC,CAAE,MAAM,IAAI,OAAO;AAClF,QAAM,mBAAmB,CAAC,UAAkB,UAAU,CAAC,YAAa,iCAAK,UAAL,CAAc,MAAM;AACxF,QAAM,oBAAoB,CAAC,UACzB,UAAU,CAAC,YAAa,iCAAK,UAAL,CAAc,OAAO;AAE/C,QAAM,eAAe,MAAM;AACzB,gBAAY,IAAI,CAAE,MAAM,OAAO,MAAM,OAAO,OAAO;AACnD;AAAA;AAGF,QAAM,eAAe,MAAM;AACzB,gBAAY;AACZ;AAAA;AAGF,QAAM,uBAAuB,CAAC,UAA+C;AAC3E,QAAI,MAAM,YAAY,SAAS,UAAU;AACvC;AAAA;AAAA;AAIJ,kBAAU,MAAM;AACd,cAAU;AAAA,KACT,CAAC;AAEJ,QAAM,aAAa,OAAO,IAAI,CAAC,kEAC5B,UAAD;AAAA,IACE,0BAAsB;AAAA,IACtB,WAAW,QAAQ;AAAA,IACnB,MAAK;AAAA,IACL,KAAK,MAAM;AAAA,IACX,SAAS,MAAM,kBAAkB,MAAM;AAAA,6DAEtC,OAAD;AAAA,IAAK,WAAW,QAAQ;AAAA,6DACrBC,kBAAD;AAAA,IAAa,OAAO,MAAM,OAAO,MAAM,OAAO;AAAA,IAAI,MAAM;AAAA,IAAI;AAAA,8DAC3D,QAAD;AAAA,IAAM,gCAA4B;AAAA,IAAC,WAAW,QAAQ;AAAA,KACnD,MAAM,QAGV,MAAM,UAAU,OAAO,iEAAUC,qBAAD;AAAA,IAAW,OAAO,CAAE,OAAO,IAAI,QAAQ;AAAA;AAI5E,iEACGC,YAAD;AAAA,IACE,QAAO;AAAA,IACP,WAAW,QAAQ;AAAA,IACnB,YAAY;AAAA,IACZ,kBAAkB;AAAA,IAClB;AAAA,IACA;AAAA,6DAEC,OAAD;AAAA,IAAK,KAAK;AAAA,6DACP,OAAD;AAAA,IAAK,WAAW,QAAQ;AAAA,6DACrBC,gBAAD;AAAA,IACE,0BAAsB;AAAA,IACtB,WAAW,QAAQ;AAAA,IACnB,OAAO,OAAO;AAAA,IACd,UAAU,CAAC,UAAU,iBAAiB,MAAM,cAAc;AAAA,IAC1D,WAAW,CAAC,UAAU,MAAM,YAAY,SAAS,WAAW;AAAA,IAC5D,WAAS;AAAA,IACT,cAAY;AAAA,IACZ;AAAA,8DAGDC,iBAAD;AAAA,IACE,yBAAqB;AAAA,IACrB,MAAM;AAAA,IACN,SAAS,MAAM,gBAAgB,SAAS,gBAAgB;AAAA,IACxD,SAAS;AAAA,IACT;AAAA,IACA,cAAY;AAAA,6DAEXH,qBAAD;AAAA,IAAW,OAAO,CAAE,OAAO,IAAI,QAAQ;AAAA,QAI1C,wEACE,UAAD;AAAA,IACE,2BAAuB;AAAA,IACvB,WAAW,QAAQ;AAAA,IACnB,MAAK;AAAA,IACL,SAAS;AAAA,KAER,cAIJ,6EACE,OAAD;AAAA,IAAK,2BAAuB;AAAA,IAAC,WAAW,QAAQ;AAAA,KAC7C;AAAA;AAQb,QAAQ,cAAc;;;;"}